<html>
<head>
    <title>the5fire.com-backbone.js-Hello World</title>
</head>
<body>
    <button id="check">新手报到</button>
    <ul id="world-list">
    </ul>
    <script src="../../lib/jquery.js"></script>
    <script src="../../lib/json2.js"></script>
    <script src="../../lib/underscore.js"></script>
    <script src="../../lib/backbone.js"></script>
    <script>
    (function($) {
        
        var World = Backbone.Model.extend({
            name: null
        });

        var Worlds = Backbone.Collection.extend({
            initialize: function(modes, options){
                this.bind('add', options.view.addOneWorlod);
            }
        });

        var AppView = Backbone.View.extend({
            el: $('body'),
            initialize: function(){
                this.worlds = new Worlds(null, {view: this});
            },
            events: {
                'click #check': 'checkIn'
            },
            checkIn: function(){
                var name = prompt('来自哪里？');
                if(!name){
                    name = "未知";
                }

                var world = new World({name: name});

                this.worlds.add(world);
            },
            addOneWorlod: function(model){

                // console.log(this, this.get('name'));
                $('#world-list').append('<li>这里是来自 <b>' + model.get('name') + '</b> 星球的问候：hello world！</li>')
            }

        });

        new AppView();

    })(jQuery);
    </script>
</body>
</html>